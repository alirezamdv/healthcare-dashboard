(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-registration"],{"05e3":function(t,e,s){},"0a4e":function(t,e,s){"use strict";s("05e3")},"5faa":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-8",staticStyle:{"background-color":"#dbe5f3"},attrs:{type:""}}),s("div",{staticClass:"container-fluid mt--7"},[s("div",{staticClass:"row mt-5"},[s("div",{staticClass:"col-xl-12 mb-5 mb-xl-0"},[s("patients-table",{attrs:{title:"All Registered Patients",showPatients:"currently in the hospital",showDeletePatientButton:!0,showWardFilter:!1}})],1)]),s("div",{staticClass:"row mt-5"},[s("div",{staticClass:"col-xl-12 mb-5 mb-xl-0"},[s("patients-table",{attrs:{title:"Admitted Patients",showPatients:"with admission"}})],1)]),s("div",{staticClass:"row mt-5"},[s("div",{staticClass:"col-xl-12 mb-5 mb-xl-0"},[s("patients-table",{attrs:{title:"Dismissed Patients",showPatients:"that are dismissed"}})],1)])])],1)},i=[],n=s("b7f9"),o={components:{PatientsTable:n["a"]},created:function(){this.$store.dispatch("setup")}},r=o,l=s("2877"),d=Object(l["a"])(r,a,i,!1,null,null,null);e["default"]=d.exports},b7f9:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card"},[s("div",{staticClass:"card-header border-0"},[s("div",{staticClass:"row align-items-center"},[s("div",{staticClass:"col"},[s("h3",{staticClass:"row ml-0"},[t._v(t._s(t.title)+" "),t.showOnlyCurrentPatients?s("i",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Table shows all currently active patients. As soon as a patient is provided with a dismissal date the patient is moved to the dismissed patients table.",expression:"'Table shows all currently active patients. As soon as a patient is provided with a dismissal date the patient is moved to the dismissed patients table.'",modifiers:{hover:!0,top:!0}}],staticClass:"far fa-question-circle text-muted"}):t.showOnlyPatientsWithoutDiagnosis?s("i",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"TODO",expression:"'TODO'",modifiers:{hover:!0,top:!0}}],staticClass:"far fa-question-circle text-muted"}):t.showOnlyPatientsHavingAdmissionDate?s("i",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Table shows all patients that have an admission date.",expression:"'Table shows all patients that have an admission date.'",modifiers:{hover:!0,top:!0}}],staticClass:"far fa-question-circle text-muted"}):s("i",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Table shows all dismissed patients as soon as a dismissal date is set.",expression:"'Table shows all dismissed patients as soon as a dismissal date is set.'",modifiers:{hover:!0,top:!0}}],staticClass:"far fa-question-circle text-muted"})]),s("div",{staticClass:"row ml-0"},[t.showWardFilter?s("div",{staticClass:"col"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-0"},[s("base-checkbox",{attrs:{checked:t.showWard},on:{input:t.checkShowWard}})],1),s("div",{staticClass:"col-0"},[t._v(" Display only from ward ")]),s("div",{staticClass:"col-0"},[t.showWard?s("base-dropdown",{staticClass:"col",attrs:{menuClasses:"wards"},scopedSlots:t._u([{key:"title",fn:function(){return[s("base-button",{staticClass:"dropdown-toggle",attrs:{type:"secondary",size:"sm"}},[t._v(" "+t._s(t.ward)+" ")])]},proxy:!0}],null,!1,3831257198)},t._l(t.wards,(function(e,a){return s("a",{key:a,staticClass:"dropdown-item",on:{click:function(s){return t.selectWard(e)}}},[t._v(" "+t._s(e)+" ")])})),0):t._e()],1)])]):t._e(),s("div",{staticClass:"col",staticStyle:{"text-align":"center","max-width":"100%"}},[t.showOnlyCurrentPatients?s("base-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Register a new Patient",expression:"'Register a new Patient'",modifiers:{hover:!0,top:!0}}],attrs:{type:"btn btn-sm btn-primary",icon:"fas fa-plus",size:"lg"},on:{click:function(e){t.patientModal=!0,t.newPatient=!0}}},[t._v("Register Patient ")]):t._e()],1)])]),s("div",[t.patientModal?s("register-patient-modal",{attrs:{show:t.patientModal,input:t.patientModalInput()},on:{"update:show":function(e){t.patientModal=e},close:t.onCloseModal}}):t._e()],1)])]),s("div",[s("div",{staticClass:"table-responsive"},[s("base-table",{attrs:{"thead-classes":"thead-light",data:t.filteredSortedPatientData},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return t.showPatient(a)?[s("th",{attrs:{scope:"row"}},[s("router-link",{attrs:{to:"/patients/"+a.id}},[t._v(t._s(a.id)+" ")])],1),s("td",[t._v(" "+t._s(a.first_name?a.first_name:t.defaultValue)+" ")]),s("td",[t._v(" "+t._s(a.last_name?a.last_name:t.defaultValue)+" ")]),s("td",[t._v(" "+t._s(a.gender?a.gender:t.defaultValue)+" ")]),s("td",[t._v(" "+t._s(a.age?a.age:t.defaultValue)+" ")]),s("td",[t._v(" "+t._s(a.admission_date?new Intl.DateTimeFormat("en-GB").format(new Date(a.admission_date)):t.defaultValue)+" ")]),s("td",[t.patientData.admission_date?[s("base-button",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Dismiss "+a.first_name+" "+a.last_name,expression:"'Dismiss ' + row.first_name + ' ' + row.last_name",modifiers:{hover:!0,top:!0}}],attrs:{type:"btn btn-sm btn-primary",icon:"fas fa-clock",size:"lg"},on:{click:function(e){return t.dismissPatient(a)}}})]:[t._v(" "+t._s(a.dismissal_date?new Intl.DateTimeFormat("en-GB").format(new Date(a.dismissal_date)):t.defaultValue)+" ")]],2),s("td",[s("base-button",{staticClass:"btn btn-sm",attrs:{icon:"fas fa-edit",type:"primary"},on:{click:function(e){t.initializePatientModal(a),t.edit=!0}}}),t.showDeletePatientButton?s("base-button",{staticClass:"btn btn-sm",attrs:{icon:"fas fa-trash-alt",type:"danger"},on:{click:function(e){return t.deletePatient(a.id)}}}):t._e()],1),s("td",[s("router-link",{attrs:{to:"/patients/"+a.id}},[s("base-button",{staticClass:"btn btn-sm",attrs:{icon:"fas fa-chart-bar",type:"primary"},on:{click:function(t){a.id}}},[t._v(" Patient Report ")])],1)],1)]:void 0}}],null,!0)},[s("template",{slot:"columns"},[s("th",{on:{click:function(e){return t.sort("id")}}},[s("up-down-arrow-switcher",{attrs:{value:t.showSortArrow("id")}}),t._v(" ID ")],1),s("th",{on:{click:function(e){return t.sort("first_name")}}},[s("up-down-arrow-switcher",{attrs:{value:t.showSortArrow("first_name")}}),t._v(" First Name ")],1),s("th",{on:{click:function(e){return t.sort("last_name")}}},[s("up-down-arrow-switcher",{attrs:{value:t.showSortArrow("last_name")}}),t._v(" Last Name ")],1),s("th",{on:{click:function(e){return t.sort("gender")}}},[s("up-down-arrow-switcher",{attrs:{value:t.showSortArrow("gender")}}),t._v(" Gender ")],1),s("th",{on:{click:function(e){return t.sort("age")}}},[s("up-down-arrow-switcher",{attrs:{value:t.showSortArrow("age")}}),t._v(" Age ")],1),s("th",{on:{click:function(e){return t.sort("admission_date")}}},[s("up-down-arrow-switcher",{attrs:{value:t.showSortArrow("admission_date")}}),t._v(" Admission ")],1),s("th",{on:{click:function(e){return t.sort("dismissal_date")}}},[s("up-down-arrow-switcher",{attrs:{value:t.showSortArrow("dismissal_date")}}),t._v(" Dismissal ")],1),t.showDeletePatientButton?s("th",[t._v("Edit/Delete "),s("i",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Edit/Delete Patient",expression:"'Edit/Delete Patient'",modifiers:{hover:!0,top:!0}}],staticClass:"far fa-question-circle"})]):s("th",[t._v("Edit "),s("i",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"Edit Patient",expression:"'Edit Patient'",modifiers:{hover:!0,top:!0}}],staticClass:"far fa-question-circle"})]),s("th",[t._v("Report "),s("i",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.top",value:"See/Edit Patient Report",expression:"'See/Edit Patient Report'",modifiers:{hover:!0,top:!0}}],staticClass:"far fa-question-circle"})])])],2)],1)])])},i=[],n=(s("4de4"),s("2909")),o=s("5530"),r=s("2f62"),l=s("ccf3"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return null===t.value?s("div"):s("span",["ascending"===t.value?s("b-icon-arrow-down"):t._e(),"descending"===t.value?s("b-icon-arrow-up"):t._e()],1)},c=[],u=s("7386"),h={props:["value"],components:{BIconArrowUp:u["b"],BIconArrowDown:u["a"]}},p=h,m=s("2877"),v=Object(m["a"])(p,d,c,!1,null,null,null),f=v.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("modal",{attrs:{show:t.patientModal},on:{close:function(e){return t.close()},"update:show":function(e){t.patientModal=e}}},[s("template",{slot:"header"},[t.newPatient?s("div",[s("h2",{staticClass:"modal-title"},[t._v("Patient registration")])]):s("div",[s("h2",{staticClass:"modal-title"},[t._v("Edit Patient")])])]),s("div",{staticClass:"row align-items-center text-left"},[s("div",{staticClass:"card col-md-12 mt-3"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"row align-items-center"},[s("base-input",{staticClass:"col-md-6",attrs:{label:"First Name",required:""},model:{value:t.first_name,callback:function(e){t.first_name=e},expression:"first_name"}}),s("base-input",{staticClass:"col-md-6",attrs:{label:"Last Name",required:""},model:{value:t.last_name,callback:function(e){t.last_name=e},expression:"last_name"}}),s("div",{staticClass:"col-md-6"},[s("label",{staticClass:"form-control-label"},[t._v("Hospital Number *")]),s("base-input",{attrs:{placeholder:"12345/67",required:""},scopedSlots:t._u([{key:"addonLeft",fn:function(){return[t._v("HN")]},proxy:!0}]),model:{value:t.hospital_number,callback:function(e){t.hospital_number=e},expression:"hospital_number"}})],1),s("div",{staticClass:"col-md-6"}),s("base-input",{staticClass:"col-md-6",attrs:{label:"Age"},model:{value:t.age,callback:function(e){t.age=e},expression:"age"}}),s("base-dropdown",{staticClass:"col-md-6",attrs:{label:"Gender"},scopedSlots:t._u([{key:"title",fn:function(){return[s("base-button",{staticClass:"dropdown-toggle",attrs:{type:"secondary"}},[s("span",{attrs:{"d-if":"!gender.length"}},[t._v(" "+t._s(t.gender)+" ")])])]},proxy:!0}])},[s("a",{staticClass:"dropdown-item",on:{click:function(e){t.gender="Male"}}},[t._v("Male")]),s("a",{staticClass:"dropdown-item",on:{click:function(e){t.gender="Female"}}},[t._v("Female")]),s("a",{staticClass:"dropdown-item",on:{click:function(e){t.gender="Other"}}},[t._v("Other")])])],1)])])]),s("template",{slot:"footer"},[s("div",{staticClass:"mr-auto"},[t._v("Fields marked with an "),s("strong",[t._v("*")]),t._v(" are required")]),s("base-button",{attrs:{type:"secondary"},on:{click:function(e){return t.close()}}},[t._v(" Close ")]),s("base-button",{attrs:{disabled:t.formIsInvalid,type:"primary"},on:{click:function(e){t.newPatient?t.registerPatient():t.editPatient()}}},[t._v(" "+t._s(t.newPatient?"Register patient":"Save changes")+" ")])],1)],2)},b=[],_=(s("ac1f"),s("466d"),s("2ca0"),{props:["input"],created:function(){var t;null!==(t=this.hospital_number)&&void 0!==t&&t.startsWith("HN")&&(this.hospital_number=this.hospital_number.substr(2))},data:function(){return Object(o["a"])({patientModal:!0,newPatient:null,first_name:null,last_name:null,hospital_number:null,age:null,gender:null},this.input)},computed:{formIsValid:function(){var t=!0;return this.first_name||(t=!1),this.last_name||(t=!1),this.hospitalNumberIsValid||(t=!1),t},formIsInvalid:function(){return!this.formIsValid},hospitalNumberWithPrefixHN:function(){return"HN"+this.hospital_number},hospitalNumberIsValid:function(){if(this.hospital_number){var t,e=/[H][N]\S{5}[/]\d{2}/g,s=null===(t=this.hospitalNumberWithPrefixHN)||void 0===t?void 0:t.match(e);return this.hospital_number&&s&&this.hospitalNumberWithPrefixHN===s[0]}return!1}},methods:{close:function(){this.$emit("close")},registerPatient:function(){var t={first_name:this.first_name,last_name:this.last_name,hospital_number:this.hospitalNumberWithPrefixHN,age:this.age,gender:this.gender};this.$store.dispatch("addPatient",t),this.close()},editPatient:function(){console.debug("editPatient");var t={first_name:this.first_name,last_name:this.last_name,gender:this.gender,age:this.age},e=this.id;this.$store.dispatch("editPatient",{id:e,patient:t}),this.close()}}}),g=_,P=Object(m["a"])(g,w,b,!1,null,null,null),C=P.exports,y={name:"patients-table",components:{UpDownArrowSwitcher:f,BaseButton:l["a"],RegisterPatientModal:C},props:{title:String,showPatients:String,showDeletePatientButton:Boolean,showWardFilter:{type:Boolean,default:!0}},data:function(){return{defaultValue:"-",datepicker:!1,patientModal:!1,newPatient:!0,patientId:null,edit:!1,first_name:null,last_name:null,gender:null,age:null,hospital_number:null,currentSort:"id",currentSortDir:"ascending"}},methods:{checkShowWard:function(t){this.$store.dispatch("showWard",t)},selectWard:function(t){this.$store.dispatch("ward",t)},displayOnlyFromward:function(t){console.log(t)},initializePatientModal:function(t){this.currentPatientToEdit=t,this.newPatient=!1,this.patientModal=!0},deletePatient:function(t){confirm("Do you really want to delete this Patient?")&&this.$store.dispatch("deletePatient",t)},dismissPatient:function(t){var e=t.id;this.$store.dispatch("dismissPatient",{id:e})},sort:function(t){t===this.currentSort?this.currentSortDir="ascending"===this.currentSortDir?"descending":"ascending":this.currentSortDir="ascending",this.currentSort=t},showSortArrow:function(t){return t===this.currentSort?this.currentSortDir:null},showPatient:function(t){return!!this.showOnlyPatientsWithoutDiagnosis||(!!this.showOnlyCurrentPatients||(!(!this.showOnlyDismissedPatients||!t.dismissal_date)||!(!this.showOnlyPatientsHavingAdmissionDate||!t.admission_date||t.dismissal_date)))},sortPatientData:function(){var t=this;return function(e,s){var a=1;return"descending"===t.currentSortDir&&(a=-1),e[t.currentSort]<s[t.currentSort]?-1*a:e[t.currentSort]>s[t.currentSort]?1*a:0}},onCloseModal:function(){this.patientModal=!1,this.currentPatientToEdit=null},patientModalInput:function(){return Object(o["a"])(Object(o["a"])({},this.currentPatientToEdit),{},{newPatient:this.newPatient})}},beforeDestroy:function(){clearInterval(this.patientData)},computed:Object(o["a"])(Object(o["a"])({},Object(r["b"])(["patientData","patientsHavingNoDiagnosis","showWard","ward","wards"])),{},{showOnlyPatientsWithoutDiagnosis:function(){return"who need a diagnosis"===this.showPatients},showOnlyDismissedPatients:function(){return"that are dismissed"===this.showPatients},showOnlyCurrentPatients:function(){return"currently in the hospital"===this.showPatients},showOnlyPatientsHavingAdmissionDate:function(){return"with admission"===this.showPatients},patientsToDisplay:function(){return this.showOnlyPatientsWithoutDiagnosis?this.patientsHavingNoDiagnosis:this.patientData},filteredSortedPatientData:function(){var t=this;return Object(n["a"])(this.patientsToDisplay).filter((function(e){return!t.showWard||!t.showWardFilter||e.id%t.ward==0})).sort(this.sortPatientData())}})},D=y,k=(s("0a4e"),Object(m["a"])(D,a,i,!1,null,null,null));e["a"]=k.exports}}]);